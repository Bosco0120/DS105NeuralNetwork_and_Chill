<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>
  <title>My Website</title>
  <style>
    body {
      background-image: url("https://drive.google.com/uc?export=view&id=1ln1ye4YfCXW-n31ln-DuhkpZ_TRzDjHq");
      background-repeat: no-repeat;
      background-position: center bottom;
      background-size: cover;
      background-attachment: fixed;
      font-family: Arial, sans-serif;
      margin: 0;
      min-height: 100vh;      
      display: flex;
      align-items: center;
    }
    
    .top-bar {
      background-color: #f3c26f;
      width: 100%;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      box-sizing: border-box;
      left: 0;
    }

    .left-text a {
      text-decoration: none;
      color: #333;
      font-size: 30px;
      font-weight: bold;
      font-family: "Times New Roman", Arial, sans-serif;
    }    
    
    .right-text a {
      text-decoration: none;
      color: #333;
      font-size: 30px;
      font-family: Consolas, Arial, sans-serif;
    }
    
    .sidebar {
      width: 200px;
      height: 100%;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      margin-top: -3000px;
      margin-left: 200px;
    }

    .sidebar ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }

    .sidebar li {
      margin-bottom: 10px;
    }

    .sidebar a {
      display: block;
      padding: 10px;
      text-decoration: none;
      font-family: Consolas, Arial, sans-serif;
      color: #333;
    }

    .sidebar a:hover {
      background-color: #f0f0f0;
    }

    .main-content {
  padding: 20px;
  margin-top: 50px; /* Adjust the margin-top value to your desired spacing */
  margin-left: 225;
  margin-right: 200;
  max-width: 800px; /* Adjust the max-width value as needed */
  text-align: justify;

}

    .main-content h1 {
      font-size: 36px;
    }

    .main-content h2 {
      font-size: 24px;
    }
  </style>
</head>

<body>
  <div class="sidebar">
    <ul>
      <li><a href="https://bosco0120.github.io/DS105NeuralNetwork_and_Chill.github.io/Webpages/data.html">&#128202;Data</a></li>
      <li><a href="https://bosco0120.github.io/DS105NeuralNetwork_and_Chill.github.io/Webpages/analysis.html">&#128200;Analysis</a></li>
      <li><a href="https://bosco0120.github.io/DS105NeuralNetwork_and_Chill.github.io/Webpages/conclusion.html">&#10002;Conclusion</a></li>
      <li><a href="https://bosco0120.github.io/DS105NeuralNetwork_and_Chill.github.io/Webpages/reference.html">&#128450;Reference & Appendix</a></li>
    </ul>
  </div>
 <div class="top-bar">
  <div class="left-text">
    <a href="../index.html">&#x1F4BB; DS105L</a>
  </div>
  <div class="right-text">
    <a href="https://github.com/Bosco0120/DS105NeuralNetwork_and_Chill.github.io" target="_blank">Code</a>
  </div>
</div>
  </div>

 <div class="main-content">
    <h1>&#128200; Data</h1>
    <p>In this section, we will be highlighting our data sources, data collection process, and the challenges we faced. We will also be providing a brief overview of our exploratory data analysis and data cleaning process.</p>

<h2>&#x1F4CD; Data Sources</h2>
     <p><strong>Idealista</strong> <br></p>
     <p>Our primary dataset was obtained by using the Idealista API. Our objective was to obtain a set of 500 data points per city for rental properties and 1500-3000 data points for sale properties across each of the ten target cities. Below is a screenshot of the Idealista website displaying a property listing. This data can be obtained through the API as well: <br>
      <img src="../Diagrams and Images/idealistalisting.png" alt="insert-img" width = '800'>
    
<h2>&#x1F4CD; Data Collection</h2>
    
    The primary Python library we used to collect the data was requests. In total, we collected 4,521 rental property listings and 16,550 sale property listings from Idealista. The Idealista API enabled us to obtain detailed property data on each listing on their page. The full datasets are available in .csv format on the Github repository. Below is a snippet of the data available to us after using the python requests library to obtain a dataframe through the Idealista API:
    
    <p><img src="../Diagrams and Images/dfmadridall snippet.png" alt="insert-img" width = '800'> </p>
      
    </p>  In addition, we also utilised data obtained from Statistia, macrotrends, and Wikipedia through web scraping as part of our preliminary analysis (see references). We employed data extraction techniques using BeautifulSoup to extract additional data from various other sources. This comprehensive process allowed us to obtain a robust and diverse dataset for analysis. Finally, we obtained two shapefiles of the cities of Madrid and Barcelona from the respective municipality websites in order to do some geographic analysis with the Madrid and Barcelona property datasets.
    
    
    
    <p><strong> Challenges: </strong> <br> </p>
    
    When collecting rental property data, we faced a significant challenge in a few of the smaller cities where the availability of rental properties within a reasonable radius was limited. Consequently, our efforts to gather the desired number of rental data points were hindered. Specifically, in Balears (Illes), Vizcaya, Zaragoza, and Las Palmas, we encountered difficulties as there were fewer than 500 data points available. 
    
    Another challenge we faced was that we initially had a limit of 1000 requests per month, significantly slowing down our data collection process. We managed to circumvent this issue by requesting for more API keys from Idealista, and strategically splitting up the requests over three months of work.
    
    
    <h2>&#x1F4CD;Exploratory Data Analysis:</h2>  

    <p> </p>As we did not obtain all our data from a singular data source, it is difficult to display all of our data at the same time below. However, below is a summary of the df_madrid_all data frame comprising of 3050 individual data points and 45 columns, providing sales data for properties in the city of Madrid:
    <p><img src="../Diagrams and Images/df_madrid summary.png" alt="insert-img" width = '400'> </p>

    Relevant columns include the address, property price, size, price by area (not shown in the above image), and latitude and longitude.
    
    
    <p><strong> Data Cleaning: </strong> 
    </p> In order to provide visual representations of the data allowing for a clear and concise presentation of our findings, we first needed to clean the dataframes. Fortunately, not much work was needed as the API was clear and straightforward, but we still needed to remove duplicates, as well as columns in the datasets uneccesary to the data.</p>
    </p> For the sales data, we removed a majority of the columns as they were not relevant to our data analysis. We also removed duplicates, as seen in the image below:</p>
    <p><img src="../Diagrams and Images/sales_data_cleaning.png" alt="insert-img" width = '800'> </p>
    </p> Additionally, when loading the shapefiles for the geographical analysis, we did encounter initial challenges performing the spatial join between the map shapefiles and the dataframes, and realised that we had to convert the shapefiles to the appropriate CRS in order to match the format for the latitude and longitude in the idealista dataframes. This is because there are many different coordinate reference systems employed by different countries and organisations, so we could only perform a join function on the map shapefile and the Idealista dataframe after we converted them to the same CRS format. For the rental data, we had to convert some of the data obtained from webscraping into regex, as well as remove unneccesary values in the data:
    <p><img src="../Diagrams and Images/rental_clean.jpeg" alt="insert-img" width = '800'> </p>
    <p> Following the data cleaning, we were left with a large but organised number of dataframes to work with, and our analysis of the data is in the following page.</p>


</div>

</body>
</html>
   
   
   
